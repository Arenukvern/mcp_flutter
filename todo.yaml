---
todos:
  - title: Refactor src/index.ts into multiple files
    steps:
      - description: Create src/types/types.ts and move interfaces and types from src/index.ts
        file: src/types/types.ts
      - description: Create src/rpc/flutter_rpc.ts and move RPCPrefix, FlutterRPC, invokeFlutterMethod, getFlutterIsolate, invokeFlutterExtension, and verifyFlutterDebugMode from src/index.ts
        file: src/rpc/flutter_rpc.ts
      - description: Create src/servers/flutter_inspector_server.ts and move the FlutterInspectorServer class from src/index.ts
        file: src/servers/flutter_inspector_server.ts
      - description: Create src/utilities/utilities.ts and move the getActivePorts method from src/index.ts
        file: src/utilities/utilities.ts
      - description: Create src/utilities/websocket_utilities.ts and move the connectWebSocket and sendWebSocketRequest methods from src/index.ts
        file: src/utilities/websocket_utilities.ts
      - description: Create src/utilities/dart_extension_service_utilities.ts and move the connectToDartProxy and sendDartProxyRequest methods from src/index.ts
        file: src/utilities/dart_extension_service_utilities.ts
      - description: Create src/handlers/tool_handlers.ts and move the setupToolHandlers method from src/index.ts
        file: src/handlers/tool_handlers.ts
      - description: Move the tool handler implementations to separate files under src/handlers/. For example, move the get_active_ports handler to src/handlers/utilities_tool_handler.ts and the debug_dump_render_tree handler to src/handlers/flutter_tool_handler.ts.
      - description: Update imports in all files to reflect the new file structure.
        file: all files
